<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>2026 FIFAワールドカップ 模擬抽選会</title>
  <style>
    body {
      font-family: "Helvetica Neue", Arial, sans-serif;
      background: linear-gradient(135deg, #0f2b5e, #1a4d8c);
      color: white;
      text-align: center;
      padding: 20px;
      min-height: 100vh;
      margin: 0;
    }
    h1 { font-size: 3rem; margin: 20px 0; text-shadow: 0 0 20px #ffcb05; }

    button {
      background: #ffcb05; color: #0f2b5e; font-size: 1.6rem; font-weight: bold;
      padding: 18px 55px; border: none; border-radius: 50px; cursor: pointer;
      box-shadow: 0 8px 30px rgba(0,0,0,0.6); margin: 20px;
      transition: all 0.3s;
    }
    button:hover:not(:disabled) { transform: translateY(-5px); }
    button:disabled { background: #555; opacity: 0.7; }

    /* ステータスエリア（画像＋文字をキレイに中央揃え） */
    #status {
      margin: 50px auto;
      min-height: 180px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 25px;
    }

    #loadingContainer {
      opacity: 0;
      transition: opacity 0.7s ease;
    }
    #loadingContainer.show {
      opacity: 1;
    }

    #loadingImg {
      width: 100px;
      height: 100px;
      filter: drop-shadow(0 0 15px #ffcb05);
    }

    .loading-text {
      font-size: 2.4rem;
      font-weight: bold;
      color: #ffcb05;
      text-shadow: 0 0 15px rgba(255,203,5,0.8);
      letter-spacing: 3px;
    }

    /* 点滅アニメーション（…がゆっくり動く） */
    .loading-dots {
      display: inline-block;
    }
    .loading-dots span {
      opacity: 0;
      animation: dotPulse 1.5s infinite;
    }
    .loading-dots span:nth-child(1) { animation-delay: 0s; }
    .loading-dots span:nth-child(2) { animation-delay: 0.3s; }
    .loading-dots span:nth-child(3) { animation-delay: 0.6s; }

    @keyframes dotPulse {
      0%, 100% { opacity: 0; }
      50% { opacity: 1; }
    }

    #result {
      max-width: 1400px; margin: 40px auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 25px;
    }
    .group {
      background: rgba(255,255,255,0.12);
      border-radius: 20px; padding: 25px; backdrop-filter: blur(12px);
      border: 1px solid rgba(255,255,255,0.2);
    }
    .group h2 { margin: 0 0 20px; font-size: 2.6rem; color: #ffcb05; }
    .team {
      background: rgba(255,255,255,0.25); margin: 12px 0;
      padding: 15px; border-radius: 12px; font-size: 1.3rem;
      opacity: 0; transform: translateY(30px);
      transition: all 0.7s ease-out;
    }
    .team.show { opacity: 1; transform: translateY(0); }
    .team.host { background: rgba(255,203,5,0.5); font-weight: bold; }
    .pot-label {
      padding: 6px 15px; border-radius: 20px;
      background: #ffcb05; color: #0f2b5e; font-weight: bold; font-size: 0.9rem;
      margin-left: 12px;
    }
  </style>
</head>
<body>
  <h1>2026 FIFA ワールドカップ</h1>
  <p style="font-size:1.6rem;">グループステージ抽選会（模擬）</p>
  <button id="startBtn">抽選会を始める</button>

  <div id="status">
    <div id="statusText">ボタンを押して抽選を開始してください</div>

    <!-- ここがローディングエリア！画像＋「抽選中…」文字が同時に表示 -->
    <div id="loadingContainer">
      <img id="loadingImg" src="./IMG_0261.gif" alt="抽選ボール">
      <div class="loading-text">
        抽選中
        <div class="loading-dots">
          <span>.</span><span>.</span><span>.</span>
        </div>
      </div>
    </div>
  </div>

  <div id="result"></div>

  <script>
    // ローディング表示の制御
    function showLoading(show = true, text = "抽選中") {
      const container = document.getElementById("loadingContainer");
      const statusText = document.getElementById("statusText");
      if (show) {
        container.classList.add("show");
        statusText.textContent = "";
      } else {
        container.classList.remove("show");
      }
    }

    // 以下は前回と同じロジック（省略せず完全版）
    const teams = [
       // ポット1（開催国＋上位）
      { name: "メキシコ", conf: "CONCACAF", pot: 1, fixed: "A" },
      { name: "カナダ", conf: "CONCACAF", pot: 1, fixed: "B" },
      { name: "アメリカ", conf: "CONCACAF", pot: 1, fixed: "D" },
      { name: "スペイン", conf: "UEFA", pot: 1 },
      { name: "アルゼンチン", conf: "CONMEBOL", pot: 1 },
      { name: "フランス", conf: "UEFA", pot: 1 },
      { name: "イングランド", conf: "UEFA", pot: 1 },
      { name: "ブラジル", conf: "CONMEBOL", pot: 1 },
      { name: "ポルトガル", conf: "UEFA", pot: 1 },
      { name: "オランダ", conf: "UEFA", pot: 1 },
      { name: "ベルギー", conf: "UEFA", pot: 1 },
      { name: "ドイツ", conf: "UEFA", pot: 1 },

      // ポット2
      { name: "日本", conf: "AFC", pot: 2 },
      { name: "韓国", conf: "AFC", pot: 2 },
      { name: "オーストラリア", conf: "AFC", pot: 2 },
      { name: "イラン", conf: "AFC", pot: 2 },
      { name: "ウルグアイ", conf: "CONMEBOL", pot: 2 },
      { name: "コロンビア", conf: "CONMEBOL", pot: 2 },
      { name: "クロアチア", conf: "UEFA", pot: 2 },
      { name: "オーストリア", conf: "UEFA", pot: 2 },
      { name: "スイス", conf: "UEFA", pot: 2 },
      { name: "モロッコ", conf: "CAF", pot: 2 },
      { name: "セネガル", conf: "CAF", pot: 2 },
      { name: "エクアドル", conf: "CONMEBOL", pot: 2 }, // 例：コスタリカなど

      // ポット3
      { name: "ノルウェー", conf: "UEFA", pot: 3 },
      { name: "パナマ", conf: "CONCACAF", pot: 3 },
      { name: "エジプト", conf: "CAF", pot: 3 },
      { name: "アルジェリア", conf: "CAF", pot: 3 },
      { name: "スコットランド", conf: "UEFA", pot: 3 },
      { name: "パラグアイ", conf: "CONMEBOL", pot: 3 },
      { name: "チュニジア", conf: "CAF", pot: 3 },
      { name: "コートジボワール", conf: "CAF", pot: 3 },
      { name: "ウズベキスタン", conf: "AFC", pot: 3 },
      { name: "カタール", conf: "AFC", pot: 3 },
      { name: "サウジアラビア", conf: "AFC", pot: 3 },
      { name: "南アフリカ", conf: "CAF", pot: 3 },

      // ポット4（残り）
      { name: "ヨルダン", conf: "AFC", pot: 4 },
      { name: "カボベルデ", conf: "CAF", pot: 4 },
      { name: "ガーナ", conf: "CAF", pot: 4 },
      { name: "キュラソー", conf: "CONCACAF", pot: 4 },
      { name: "ニュージーランド", conf: "OFC", pot: 4 },
      { name: "ハイチ", conf: "CONCACAF", pot: 4 },
      { name: "欧州PO1", conf: "UEFA", pot: 4 },
      { name: "欧州PO2", conf: "UEFA", pot: 4 },
      { name: "欧州PO3", conf: "UEFA", pot: 4 },
      { name: "欧州PO4", conf: "UEFA", pot: 4 },
      { name: "大陸間PO1", conf: "PO", pot: 4 },
      { name: "大陸間PO2", conf: "PO", pot: 4 }, 
    ];

    const GROUPS = "ABCDEFGHIJKL".split("");
    let groups = {}, pots = {};

    function shuffle(a) { for (let i = a.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [a[i], a[j]] = [a[j], a[i]]; } return a; }
    function canPlace(t,g) { const c = g.reduce((a,x)=>(a[x.conf]=(a[x.conf]||0)+1,a),{}); return t.conf==="UEFA" ? (c[t.conf]||0)<2 : (c[t.conf]||0)===0; }

    function addTeamToGroup(letter, team) {
      const div = document.createElement("div");
      div.className = "team";
      div.innerHTML = `${team.pos}. ${team.name} <small>(${team.conf})</small>
        <span class="pot-label">Pot ${team.pot}</span>`;
      if (team.fixed) div.classList.add("host");
      document.querySelector(`#group-${letter}`).appendChild(div);
      setTimeout(() => div.classList.add("show"), 100);
    }

    function initGroups() {
      groups = Object.fromEntries(GROUPS.map(g => [g, []]));
      document.getElementById("result").innerHTML = "";
      GROUPS.forEach(g => {
        const div = document.createElement("div");
        div.className = "group"; div.id = `group-${g}`;
        div.innerHTML = `<h2>グループ ${g}</h2>`;
        document.getElementById("result").appendChild(div);
      });
    }

    async function drawPot(potNumber) {
      showLoading(true);
      document.getElementById("statusText").textContent = "";
      await new Promise(r => setTimeout(r, 800));

      const potTeams = shuffle([...pots[potNumber]]);
      for (const team of potTeams) {
        let avail = GROUPS.filter(g => groups[g].length < 4 && canPlace(team, groups[g]));
        if (avail.length === 0) avail = GROUPS.filter(g => groups[g].length < 4);
        const chosen = avail[Math.floor(Math.random() * avail.length)];
        team.pos = groups[chosen].length + 1;
        groups[chosen].push(team);
        addTeamToGroup(chosen, team);
        await new Promise(r => setTimeout(r, 750));
      }

      showLoading(false);
      document.getElementById("statusText").innerHTML = 
        `<span style="color:#ffcb05; font-size:2.8rem; font-weight:bold;">ポット${potNumber} 完了！</span>`;
      await new Promise(r => setTimeout(r, 2000));
    }

    async function startDraw() {
      const btn = document.getElementById("startBtn");
      btn.disabled = true; btn.textContent = "抽選準備中…";

      showLoading(false);
      document.getElementById("statusText").textContent = "開催国を配置中…";
      initGroups();

      pots = {1:[],2:[],3:[],4:[]};
      teams.forEach(t => pots[t.pot].push({...t}));

      // 開催国
      teams.filter(t => t.fixed).forEach(h => { h.pos=1; groups[h.fixed]=[h]; addTeamToGroup(h.fixed, h); });
      await new Promise(r => setTimeout(r, 1800));

      // ポット1残り
      const rest1 = shuffle(pots[1].filter(t => !t.fixed));
      let idx = 0; const empty = GROUPS.filter(g => groups[g].length === 0);
      rest1.forEach(t => { const g = empty[idx++] || GROUPS.find(x=>groups[x].length===0); t.pos=1; groups[g].push(t); addTeamToGroup(g,t); });
      await new Promise(r => setTimeout(r, 2000));

      for (let p = 2; p <= 4; p++) await drawPot(p);

      document.getElementById("statusText").innerHTML = 
        `<div style="font-size:3.2rem; color:#ffcb05; text-shadow:0 0 20px gold;">抽選終了！</div>
         <div style="font-size:2rem; margin-top:20px;">新たなドラマが始まります！</div>`;
      btn.textContent = "もう一度抽選する";
      btn.disabled = false;
    }

    document.getElementById("startBtn").onclick = startDraw;
  </script>
  <br>©PureGreen
</body>
</html>
