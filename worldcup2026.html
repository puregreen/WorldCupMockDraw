<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>2026 FIFAワールドカップ 本戦抽選会（完全公式ルール対応）</title>
  <style>
    body {font-family: "Helvetica Neue", Arial, sans-serif;background: linear-gradient(135deg, #0f2b5e, #1a4d8c);color: white;text-align: center;padding: 20px;min-height: 100vh;margin: 0;}
    h1 {font-size: 3.2rem;margin: 20px 0;text-shadow: 0 0 20px #ffcb05;}
    button {background: #ffcb05;color: #0f2b5e;font-size: 1.7rem;font-weight: bold;padding: 20px 60px;border: none;border-radius: 50px;cursor: pointer;box-shadow: 0 10px 30px rgba(0,0,0,0.6);transition: all 0.3s;}
    button:hover:not(:disabled) {transform: translateY(-6px);}
    button:disabled {background: #555;opacity: 0.7;}

    #status {margin: 50px auto;min-height: 180px;display: flex;flex-direction: column;align-items: center;justify-content: center;gap: 25px;}
    #loadingContainer {opacity: 0;transition: opacity 0.7s;}
    #loadingContainer.show {opacity: 1;}
    #loadingImg {width: 110px;height: 110px;filter: drop-shadow(0 0 20px #ffcb05);}
    .loading-text {font-size: 2.6rem;font-weight: bold;color: #ffcb05;text-shadow: 0 0 20px rgba(255,203,5,0.9);letter-spacing: 4px;}
    .loading-dots span {opacity: 0;animation: dotPulse 1.8s infinite;}
    .loading-dots span:nth-child(1) {animation-delay: 0s;}
    .loading-dots span:nth-child(2) {animation-delay: 0.4s;}
    .loading-dots span:nth-child(3) {animation-delay: 0.8s;}
    @keyframes dotPulse {0%,100%{opacity:0} 50%{opacity:1}}

    #result {max-width: 1500px;margin: 40px auto;display: grid;grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));gap: 28px;}
    .group {background: rgba(255,255,255,0.14);border-radius: 22px;padding: 28px;backdrop-filter: blur(14px);border: 1px solid rgba(255,255,255,0.25);}
    .group h2 {margin: 0 0 25px;font-size: 2.8rem;color: #ffcb05;}
    .team {background: rgba(255,255,255,0.28);margin: 14px 0;padding: 16px;border-radius: 14px;font-size: 1.35rem;opacity: 0;transform: translateY(40px);transition: all 0.8s ease-out;}
    .team.show {opacity: 1;transform: translateY(0);}
    .team.host {background: rgba(255,203,5,0.6);font-weight: bold;color: #fff;}
    .pot-label {padding: 7px 16px;border-radius: 25px;background: #ffcb05;color: #0f2b5e;font-weight: bold;font-size: 0.95rem;margin-left: 12px;}
  </style>
</head>
<body>
  <h1>2026 FIFA ワールドカップ</h1>
  <p style="font-size:1.8rem;">本戦グループステージ抽選会（模擬）</p>
  <button id="startBtn">抽選開始</button>

  <div id="status">
    <div id="statusText">ボタンを押して抽選を開始</div>
    <div id="loadingContainer">
      <img id="loadingImg" src="./IMG_0261.gif" alt="抽選中">
      <div class="loading-text">
        抽選中
        <div class="loading-dots" style="display:inline-block">
          <span>.</span><span>.</span><span>.</span>
        </div>
      </div>
    </div>
  </div>

  <div id="result"></div>

  <script>

    // 48チーム（2026年大会想定・最新ランキング準拠）
    const teams = [
      // ポット1（開催国＋上位）
      { name: "メキシコ", conf: "CONCACAF", pot: 1, fixed: "A" },
      { name: "カナダ", conf: "CONCACAF", pot: 1, fixed: "B" },
      { name: "アメリカ", conf: "CONCACAF", pot: 1, fixed: "D" },
      { name: "スペイン", conf: "UEFA", pot: 1 },
      { name: "アルゼンチン", conf: "CONMEBOL", pot: 1 },
      { name: "フランス", conf: "UEFA", pot: 1 },
      { name: "イングランド", conf: "UEFA", pot: 1 },
      { name: "ブラジル", conf: "CONMEBOL", pot: 1 },
      { name: "ポルトガル", conf: "UEFA", pot: 1 },
      { name: "オランダ", conf: "UEFA", pot: 1 },
      { name: "ベルギー", conf: "UEFA", pot: 1 },
      { name: "ドイツ", conf: "UEFA", pot: 1 },

      // ポット2
      { name: "日本", conf: "AFC", pot: 2 },
      { name: "韓国", conf: "AFC", pot: 2 },
      { name: "オーストラリア", conf: "AFC", pot: 2 },
      { name: "イラン", conf: "AFC", pot: 2 },
      { name: "ウルグアイ", conf: "CONMEBOL", pot: 2 },
      { name: "コロンビア", conf: "CONMEBOL", pot: 2 },
      { name: "クロアチア", conf: "UEFA", pot: 2 },
      { name: "オーストリア", conf: "UEFA", pot: 2 },
      { name: "スイス", conf: "UEFA", pot: 2 },
      { name: "モロッコ", conf: "CAF", pot: 2 },
      { name: "セネガル", conf: "CAF", pot: 2 },
      { name: "エクアドル", conf: "CONMEBOL", pot: 2 }, // 例：コスタリカなど

      // ポット3
      { name: "ノルウェー", conf: "UEFA", pot: 3 },
      { name: "パナマ", conf: "CONCACAF", pot: 3 },
      { name: "エジプト", conf: "CAF", pot: 3 },
      { name: "アルジェリア", conf: "CAF", pot: 3 },
      { name: "スコットランド", conf: "UEFA", pot: 3 },
      { name: "パラグアイ", conf: "CONMEBOL", pot: 3 },
      { name: "チュニジア", conf: "CAF", pot: 3 },
      { name: "コートジボワール", conf: "CAF", pot: 3 },
      { name: "ウズベキスタン", conf: "AFC", pot: 3 },
      { name: "カタール", conf: "AFC", pot: 3 },
      { name: "サウジアラビア", conf: "AFC", pot: 3 },
      { name: "南アフリカ", conf: "CAF", pot: 3 },

      // ポット4（残り）
      { name: "ヨルダン", conf: "AFC", pot: 4 },
      { name: "カボベルデ", conf: "CAF", pot: 4 },
      { name: "ガーナ", conf: "CAF", pot: 4 },
      { name: "キュラソー", conf: "CONCACAF", pot: 4 },
      { name: "ニュージーランド", conf: "OFC", pot: 4 },
      { name: "ハイチ", conf: "CONCACAF", pot: 4 },
      { name: "欧州PO1", conf: "UEFA", pot: 4 },
      { name: "欧州PO2", conf: "UEFA", pot: 4 },
      { name: "欧州PO3", conf: "UEFA", pot: 4 },
      { name: "欧州PO4", conf: "UEFA", pot: 4 },
      { name: "大陸間PO1", conf: "PO", pot: 4 },
      { name: "大陸間PO2", conf: "PO", pot: 4 },
    ];

    const GROUPS = "ABCDEFGHIJKL".split("");

    function showLoading(show = true) {
      document.getElementById("loadingContainer").classList.toggle("show", show);
    }

    function shuffle(a) { for (let i = a.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [a[i], a[j]] = [a[j], a[i]]; } return a; }

    function canPlaceInGroup(team, groupTeams) {
      // 同じポットのチームが既にいるか？
      if (groupTeams.some(t => t.pot === team.pot)) return false;
      // 大陸制約
      const confCount = groupTeams.reduce((c, t) => (c[t.conf] = (c[t.conf] || 0) + 1, c), {});
      if (team.conf === "UEFA") {
        return (confCount.UEFA || 0) < 2;
      } else {
        return (confCount[team.conf] || 0) === 0;
      }
    }

    function addTeam(letter, team) {
      const div = document.createElement("div");
      div.className = "team";
      div.innerHTML = `${team.pos}. ${team.name} <small>(${team.conf})</small> <span class="pot-label">Pot ${team.pot}</span>`;
      if (team.fixed) div.classList.add("host");
      document.querySelector(`#group-${letter}`).appendChild(div);
      setTimeout(() => div.classList.add("show"), 100);
    }

    function initGroups() {
      const result = document.getElementById("result");
      result.innerHTML = "";
      GROUPS.forEach(g => {
        const div = document.createElement("div");
        div.className = "group"; div.id = `group-${g}`;
        div.innerHTML = `<h2>グループ ${g}</h2>`;
        result.appendChild(div);
      });
    }

    async function startDraw() {
      const btn = document.getElementById("startBtn");
      btn.disabled = true; btn.textContent = "抽選中…";
      showLoading(false);
      document.getElementById("statusText").textContent = "開催国を配置中…";
      initGroups();

      const groups = Object.fromEntries(GROUPS.map(g => [g, []]));
      const pots = {1: [], 2: [], 3: [], 4: []};
      teams.forEach(t => pots[t.pot].push({...t}));

      // 1. 開催国固定配置
      teams.filter(t => t.fixed).forEach(host => {
        host.pos = 1;
        groups[host.fixed] = [host];
        addTeam(host.fixed, host);
      });
      await new Promise(r => setTimeout(r, 2000));

      // 2. 残りのポット1（空いているグループにランダム配置）
      const pot1Rest = shuffle(pots[1].filter(t => !t.fixed));
      let emptyGroups = GROUPS.filter(g => groups[g].length === 0);
      pot1Rest.forEach((team, i) => {
        const g = emptyGroups[i];
        team.pos = 1;
        groups[g].push(team);
        addTeam(g, team);
      });
      await new Promise(r => setTimeout(r, 2500));

      // 3. ポット2 → ポット3 → ポット4 を順に配置
      for (let potNum = 2; potNum <= 4; potNum++) {
        showLoading(true);
        document.getElementById("statusText").textContent = "";
        await new Promise(r => setTimeout(r, 1000));

        const potTeams = shuffle(pots[potNum]);
        for (const team of potTeams) {
          const availableGroups = GROUPS.filter(g =>
            groups[g].length < 4 &&
            !groups[g].some(t => t.pot === potNum) &&  // 同じポットなし
            canPlaceInGroup(team, groups[g])
          );
          const chosen = availableGroups[Math.floor(Math.random() * availableGroups.length)];
          team.pos = groups[chosen].length + 1;
          groups[chosen].push(team);
          addTeam(chosen, team);
          await new Promise(r => setTimeout(r, 800));
        }
        showLoading(false);
        document.getElementById("statusText").innerHTML = `<span style="color:#ffcb05;font-size:3rem;">ポット${potNum} 完了！</span>`;
        await new Promise(r => setTimeout(r, 2200));
      }

      document.getElementById("statusText").innerHTML = 
        `<div style="font-size:3.5rem;color:#ffcb05;text-shadow:0 0 30px gold;">抽選終了！</div>
         <div style="font-size:2rem;margin-top:20px;">48チームの運命が決まりました！</div>`;
      btn.textContent = "もう一度抽選";
      btn.disabled = false;
    }

    document.getElementById("startBtn").onclick = startDraw;
  </script>
  <br>©PureGreen
</body>
</html>
